!function(){var e,o=document.querySelector(".btn--timer"),t=document.querySelector(".timer"),n=document.getElementById("progress-bar"),a=document.querySelector(".menu"),r=a.querySelectorAll(".btn"),c=document.querySelector(".btn--settings"),i=document.querySelector(".modal__btn"),l=document.querySelector(".modal-backdrop"),s=l.querySelector(".modal__form"),d="pomoConfig",u={pomodoro:25,shortBreak:5,longBreak:15,fontFamily:"Kumbh Sans",color:"red"},m="pomodoro",f=0,v=0,k=!0,g=!1;function b(){k=!0,clearInterval(e)}function p(){v+=1,y()}function y(){var e=60*u[m],o=e-v,a=Math.floor(o/60),r=o%60;if(v>=e)return a=0,r=0,b(),new Audio("./sounds/times-up.mp3").play(),"shortBreak"===m||"longBreak"===m?(m="pomodoro",E("Break ended. Let's get back to work"),void h("pomodoro")):"pomodoro"===m&&f<3?(h("shortBreak"),E("Good work! Time to take a short break."),void f++):(h("longBreak"),E("Good work! Time to take a long break."),void(f=0));var c=a<10?"0"+a:a,i=r<10?"0"+r:r;t.querySelector(".minutes").innerText="".concat(c),t.querySelector(".seconds").innerText="".concat(i),function(e){var o=Number(n.attributes.r.value),t=(2*Math.PI*o).toFixed(2),a=v*t/e;n.attributes["stroke-dasharray"].value="".concat(t-a," ").concat(a)}(e)}function h(e){m=e,v=0,o.innerText="start",b(),y(),S(),B(a.querySelector("[data-mode='".concat(m,"']")))}function B(e){e.classList.add("btn--active")}function S(){r.forEach((function(e){e.classList.remove("btn--active")}))}function L(){l.classList.remove("modal-backdrop--active"),document.body.classList.remove("has-modal")}function q(){document.documentElement.dataset.color=u.color,document.documentElement.dataset.font=u.fontFamily}function E(e){new Notification(e,{icon:"../assets/notification.png"})}o.addEventListener("click",(function(){var t;k?(k=!1,e=setInterval(p,1e3),t=new Audio("./sounds/clock-ticking.mp3"),g||(t.play(),g=!0,t.addEventListener("ended",(function(){g=!1}))),o.innerText="pause"):(b(),o.innerText="start")})),a.addEventListener("click",(function(e){!function(e){!e.target.classList.contains("btn--active")&&e.target.classList.contains("btn")&&(S(),B(e.target),h(e.target.dataset.mode))}(e)})),c.addEventListener("click",(function(){l.classList.add("modal-backdrop--active"),document.body.classList.add("has-modal"),s.elements.pomodoro.value=u.pomodoro,s.elements.shortBreak.value=u.shortBreak,s.elements.longBreak.value=u.longBreak,s.elements.fontFamily.value=u.fontFamily,s.elements.color.value=u.color})),i.addEventListener("click",(function(){L()})),s.addEventListener("submit",(function(e){!function(e){e.preventDefault(),u.pomodoro=Number(s.elements.pomodoro.value),u.longBreak=Number(s.elements.longBreak.value),u.shortBreak=Number(s.elements.shortBreak.value),u.fontFamily=s.elements.fontFamily.value,u.color=s.elements.color.value,q(),y(),window.localStorage.setItem(d,JSON.stringify(u)),L()}(e)})),"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){console.log(e)})),function(){if(storageData=JSON.parse(localStorage.getItem(d)))for(var e in u)u[e]=storageData[e];q(),y()}()}();